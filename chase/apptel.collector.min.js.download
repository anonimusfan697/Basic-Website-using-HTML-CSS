(function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(exports,'__esModule',{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&'object'==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,'default',{enumerable:!0,value:value}),2&mode&&'string'!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module['default']}:function(){return module};return __webpack_require__.d(getter,'a',getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p='',__webpack_require__(__webpack_require__.s=6)})([function(module,__webpack_exports__,__webpack_require__){'use strict';(function(global){function storageAvailable(type){var storage;try{storage=window[type];var x='__storage_test__';return storage.setItem(x,x),storage.removeItem(x),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||'QuotaExceededError'===e.name||'NS_ERROR_DOM_QUOTA_REACHED'===e.name)&&storage&&0!==storage.length}}__webpack_require__.d(__webpack_exports__,'b',function(){return getKeyByValue}),__webpack_require__.d(__webpack_exports__,'a',function(){return getCookie}),__webpack_require__.d(__webpack_exports__,'c',function(){return getUserId}),__webpack_require__.d(__webpack_exports__,'d',function(){return parsePCCookie});var getKeyByValue=function(object,value){return Object.keys(object).find(function(key){return object[key]===value})},getCookie=function(name){for(var c,nameEQ=name+'=',value=null,ca=document.cookie.split(';'),i=0;i<ca.length;i++){for(c=ca[i];' '==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(nameEQ))return value=c.substring(nameEQ.length,c.length),value}return null},getUserId=function(){var id;if(storageAvailable('localStorage')&&(id=localStorage.getItem('apptel-userId'),id))return id},parsePCCookie=function(){function getPart(buff){var regex=/(.{0,})=(.{0,})/g,r=regex.exec(buff);r&&2<r.length&&(retval[r[1]]=r[2])}var pcCookie=getCookie('PC_1_0');if(!pcCookie)return null;var parts=window.decodeURIComponent(pcCookie).split('|'),retval={};return parts.forEach(function(buffer){try{getPart(buffer)}catch(e){}}),retval.pm&&(retval.pm=global.decodeURIComponent(retval.pm)),retval.apc&&(retval.apc=global.decodeURIComponent(retval.apc)),retval.AOC&&(retval.AOC=global.decodeURIComponent(retval.AOC)),retval}}).call(this,__webpack_require__(1))},function(module){var g=function(){return this}();try{g=g||new Function('return this')()}catch(e){'object'==typeof window&&(g=window)}module.exports=g},function(){'use strict'},function(module,__webpack_exports__,__webpack_require__){'use strict';(function(global){function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError('Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}function _unsupportedIterableToArray(o,minLen){if(o){if('string'==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return'Object'===n&&o.constructor&&(n=o.constructor.name),'Map'===n||'Set'===n?Array.from(o):'Arguments'===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:'undefined'!=typeof Symbol&&arr[Symbol.iterator]||arr['@@iterator'];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!(i&&_arr.length===i));_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i['return']||_i['return']()}finally{if(_d)throw _e}}return _arr}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function Api(dtrum){var _this=this,_dtrum=dtrum,actions={},perfSupported=!!(window.localStorage&&window.localStorage.getItem('perf')),profileActionId=-1;this.initialize=function(){_dtrum&&_dtrum.setLoadEndManually(),_dtrum&&_dtrum.disableSessionReplay()},this.initializeSessionAttributes=function(){try{var pcInfo=_utils__WEBPACK_IMPORTED_MODULE_1__.d();if(pcInfo){var userId=_utils__WEBPACK_IMPORTED_MODULE_1__.c()||pcInfo.ECI||'@@'.concat(Date.now());_dtrum&&_dtrum.identifyUser(userId),global.actionManager.addSessionProperty('userSegment',pcInfo.segment),global.actionManager.addSessionProperty('pid',pcInfo.pfid),global.actionManager.addSessionProperty('at',window.decodeURIComponent(pcInfo.pm)),global.actionManager.addSessionProperty('br',_utils__WEBPACK_IMPORTED_MODULE_1__.a('BRAND_1_0'))}}catch(ex){void 0,void 0}global.actionManager.addSessionProperty('av','1.8.1'),window.channel&&global.actionManager.addSessionProperty('chan',window.channel),window.navigator&&(window.navigator.deviceMemory&&global.actionManager.addSessionProperty('deviceMemory',window.navigator.deviceMemory),window.navigator.hardwareConcurrency&&global.actionManager.addSessionProperty('hc',window.navigator.hardwareConcurrency),window.navigator.connection&&window.navigator.connection.effectiveType&&global.actionManager.addSessionProperty('ct',window.navigator.connection.effectiveType))},this.enterAction=function(actionName){global.performance&&global.performance.mark(''.concat(actionName,'-start'));var actionId=_dtrum&&_dtrum.enterAction(actionName);return'$$profile-start'==actionName&&(profileActionId=actionId),actions[actionName]=actionId,actionId},this.enterUserAction=function(actionName,type,startTimestamp){var actionId=_dtrum&&_dtrum.enterAction(actionName,type,startTimestamp);return actionId},this.leaveAction=function(actionId){if('string'==typeof actionId||actionId instanceof String){var id=actions[actionId];if(!id)return;void 0,perfSupported&&window.performance.mark(''.concat(actionId,'-end')),_dtrum&&_dtrum.leaveAction(id)}else{var actionName=_utils__WEBPACK_IMPORTED_MODULE_1__.b(actions,actionId);perfSupported&&window.performance.mark(''.concat(actionName,'-end')),perfSupported&&window.performance.measure(actionName,''.concat(actionName,'-start'),''.concat(actionName,'-end')),void 0,_dtrum&&_dtrum.leaveAction(actionId)}actionId==profileActionId&&_this.initializeSessionAttributes()},this.leaveUserAction=function(actionId,leaveTimestamp){_dtrum&&_dtrum.leaveAction(actionId,leaveTimestamp)},this.logEvent=function(name){var actionId=_dtrum&&_dtrum.enterAction('@@'.concat(name,'@@'),'event');_dtrum&&_dtrum.leaveAction(actionId)},this.endSession=function(){_dtrum&&_dtrum.endSession()},this.setActionName=function(name,id){_dtrum&&_dtrum.actionName(name,id)},this.signalLoadEnd=function(){_dtrum&&_dtrum.signalLoadEnd()},this.leaveAllActions=function(){_dtrum&&_dtrum.sendSignal(!1,!1,!1)},this.flush=function(){},this.setSessionProperties=function(obj){obj&&Object.entries(obj).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];global.actionManager.addSessionProperty(key,value)})},this.setActionProperties=function(actionId,longProps,dateProps,stringProps,doubleProps){var retval=null;return _dtrum&&(retval=_dtrum.addActionProperties(actionId,longProps,dateProps,stringProps,doubleProps)),retval},this.reportError=function(key,value){_dtrum&&_dtrum.reportCustomError(key,value,null,!0)},window.addEventListener('unload',function(){_dtrum&&_dtrum.sendSignal(!1,!1,!1),void 0})}__webpack_require__.d(__webpack_exports__,'a',function(){return Api});var _settings__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0)}).call(this,__webpack_require__(1))},function(module,__webpack_exports__,__webpack_require__){'use strict';(function(global){function BlueListener(initializedApi,actionManager){var _api=initializedApi,_actionManager=actionManager;this.initialize=function(){var _screenInfoStore,_loadId=_api.enterAction('$$framework-load','load',null,null,'framework-load');global.addEventListener('blueReady',function(){void 0,_api.leaveAction(_loadId),global.require&&global.require('blue/site').enablePerformanceMonitoring(function(e){if('blue:lifecycle:route:batch:begin'===e.type)_actionManager.updateClientActionName('default|'.concat(_screenInfoStore.getScreenId().split('?')[0]));else if('blue:lifecycle:route:batch:end'===e.type)_actionManager.updateClientActionEndTime(e.eventTimeStamp);else if('blue:lifecycle:area:load:begin'===e.type){var numAreasLoaded=_actionManager.getActionProperty('numAreaLoad');numAreasLoaded||(numAreasLoaded=0),numAreasLoaded++,_actionManager.addActionProperty('numAreaLoad',numAreasLoaded),_actionManager.addActionProperty('areasLoaded','yes')}}),_screenInfoStore=global.require('analytics/util/stores/screenInfo');var actionStreamFunction=global.require('blue/event/channel/component').asEventStream('action').map(function(event){var actionName='default|'.concat(event.target.spec.name,'|').concat(event.action),initiator=''.concat(event.target.spec.name,'|').concat(event.action),prevScreen=_screenInfoStore.getScreenId().split('?')[0];_actionManager.startClientAction(actionName,event.eventTimeStamp,initiator,prevScreen)}),blueEventChannel=new(global.require('blue/event/channel'));blueEventChannel.plug(actionStreamFunction),global.require('analytics/util/streamCollator')(void 0,void 0,void 0,!0,{variableSettingsEvent:!0}).then(function(streams){0<streams.length&&streams[0].onValue(function(event){var errorKey=event.component?event.component:'UNKNOWN',errorValue='UNKNOWN';event.payload&&event.payload.data&&(errorValue=''.concat(event.payload.data.placement,'|').concat(event.payload.data.variation)),_actionManager.reportError(errorKey,errorValue)})})})}}__webpack_require__.d(__webpack_exports__,'a',function(){return BlueListener})}).call(this,__webpack_require__(1))},function(module,__webpack_exports__,__webpack_require__){'use strict';function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError('Cannot call a class as a function')}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,'value'in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError('Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}function _unsupportedIterableToArray(o,minLen){if(o){if('string'==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return'Object'===n&&o.constructor&&(n=o.constructor.name),'Map'===n||'Set'===n?Array.from(o):'Arguments'===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:'undefined'!=typeof Symbol&&arr[Symbol.iterator]||arr['@@iterator'];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!(i&&_arr.length===i));_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i['return']||_i['return']()}finally{if(_d)throw _e}}return _arr}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ActionManager(api){var _this=this;UserAction.api=api;var approvedSessionProps=['userSegment','tna','deviceMemory'],approvedActionProps=['initiator','childActions','areasLoaded','customLong1','customLong2','customString1','customString2'],limitBeforeClearActions=3,clearActionCounter=limitBeforeClearActions;this.asyncActions=[],this.clientAction=new UserAction,this.sessionProps={},this.otherSessionProps={},this.initialize=function(){UserAction.api.initializeSessionAttributes()},this.startClientAction=function(name){var timestamp=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,initiator=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,prevScreen=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;try{if(!name)return;_this.clientAction.active&&_this.endClientAction(),_this.clientAction=new UserAction(name,'clientAction',timestamp),_this.clientAction.actionProps.initiator=initiator,prevScreen&&_this.addActionProperty('prev',prevScreen),_this.clientAction.startAction()}catch(ex){void 0,void 0}},this.endClientAction=function(){var name=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null,useCurrentTime=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1];try{name&&_this.clientAction.updateName(name),_this.clientAction.endAction(useCurrentTime),clearActionCounter++,clearActionCounter>limitBeforeClearActions&&1>_this.asyncActions.length&&(clearActionCounter=0,void 0,UserAction.api.leaveAllActions())}catch(ex){void 0,void 0}},this.updateClientActionName=function(name){name?_this.clientAction.updateName(name):void 0},this.updateClientActionEndTime=function(){var timestamp=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null;_this.clientAction.updateEndTime(timestamp)},this.startChildAction=function(name){try{if(!name)return;if(!_this.clientAction.active)return;var childAction=new UserAction('child|'.concat(name),'childAction');childAction.startAction(),_this.clientAction.addChildAction(childAction)}catch(ex){void 0,void 0}},this.endChildAction=function(){var name=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null;try{var activeChildAction=_this.findActiveAction(_this.clientAction.children,name);activeChildAction&&activeChildAction.endAction(!0)}catch(ex){void 0,void 0}},this.startAsyncAction=function(name){var timeout=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;if(name){var asyncAction=new UserAction('async|'.concat(name),'asyncAction');asyncAction.timeout=timeout,asyncAction.startAction(),_this.asyncActions.push(asyncAction)}},this.endAsyncAction=function(){var name=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null,activeAsyncAction=_this.findActiveAction(_this.asyncActions,name);activeAsyncAction&&activeAsyncAction.endAction(!0)},this.findActiveAction=function(actionList){var name=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,activeActions=actionList.filter(function(action){return!0==action.active});return name&&(activeActions=activeActions.filter(function(action){return action.name.endsWith(name.toLowerCase())})),0==activeActions.length?void 0:activeActions[activeActions.length-1]},this.addSessionProperty=function(name,value){if(name)try{if(approvedSessionProps.includes(name))_this.sessionProps[name]=value;else{_this.otherSessionProps[name]=value;var propStrings=[];Object.entries(_this.otherSessionProps).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];propStrings.push(''.concat(key,':').concat(value))}),_this.sessionProps.other=propStrings.join('|')}}catch(ex){}},this.addActionProperty=function(name,value){var _NumberisFinite=Number.isFinite,bucketProp=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,buckets=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];if(name)try{if(approvedActionProps.includes(name))_this.clientAction.actionProps[name]=value;else{_this.clientAction.otherActionProps[name]=value;var propStrings=[];Object.entries(_this.clientAction.otherActionProps).forEach(function(_ref3){var _ref4=_slicedToArray(_ref3,2),key=_ref4[0],value=_ref4[1];propStrings.push(''.concat(key,':').concat(value))});var prevIndex=propStrings.findIndex(function(s){return s.startsWith('prev:')});0<=prevIndex&&propStrings.push(propStrings.splice(prevIndex,1)[0]),_this.clientAction.actionProps.other=propStrings.join('|')}if(bucketProp&&Array.isArray(buckets)&&0<buckets.length&&_NumberisFinite(value)&&!buckets.find(function(bucket){!_NumberisFinite(bucket)})){var bucketValue=null;if(value>buckets[buckets.length-1])bucketValue='>'.concat(buckets[buckets.length-1]);else for(var x=buckets.length-1;0<=x;x--)value<=buckets[x]&&(bucketValue=0==x?0==value&&0==buckets[x]?'0':'<='.concat(buckets[x]):''.concat(buckets[x-1]+1,'-').concat(buckets[x]));_this.addActionProperty(bucketProp,bucketValue)}}catch(ex){}},this.getActionProperty=function(name){return approvedActionProps.includes(name)?_this.clientAction.actionProps[name]:_this.clientAction.otherActionProps[name]},this.sendTestActionProp=function(value){var stringProps={};stringProps.apitest=value,void 0,UserAction.api.setActionProperties(_this.clientAction.id,null,null,stringProps,null)},this.reportError=function(errorKey,errorValue){void 0,UserAction.api.reportError(errorKey,errorValue)}}function Apptel(dtObj){var _api=new api.a(dtObj);_api.initialize(),_api.signalLoadEnd();var _actionManager=new ActionManager(_api),_blueListener=new blueListener.a(_api,_actionManager);_blueListener.initialize(),this.api=_api,this.actionManager=_actionManager}__webpack_require__.d(__webpack_exports__,'a',function(){return Apptel});var settings=__webpack_require__(2),api=__webpack_require__(3),blueListener=__webpack_require__(4),UserAction=function(){function UserAction(name,type,startTimestamp){_classCallCheck(this,UserAction),this.name=name?name.toLowerCase():'default',this.originalName=this.name,this.type=type,this.startTime=startTimestamp?startTimestamp:new Date().getTime(),this.endTime=startTimestamp+1,this.id=null,this.active=!1,this.timeout=null,this.actionProps={},this.otherActionProps={},this.children=[],this.endTimeUpdates=0}return _createClass(UserAction,[{key:'startAction',value:function(){this.id=UserAction.api.enterUserAction(this.name,this.type,this.startTime),this.active=!0}},{key:'endAction',value:function(){var useCurrentTime=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];this.active&&(useCurrentTime&&this.updateEndTime(),this.endChildActions(),this.name!=this.originalName&&UserAction.api.setActionName(this.name,this.id),UserAction.api.leaveUserAction(this.id,this.endTime),this.active=!1)}},{key:'updateName',value:function(newName){this.name=newName.toLowerCase()}},{key:'updateEndTime',value:function(){var endTimestamp=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this.endTime=endTimestamp?endTimestamp:new Date().getTime(),this.endTimeUpdates++}},{key:'addChildAction',value:function(childAction){this.children.push(childAction),this.actionProps.childActions?this.actionProps.childActions+=','.concat(childAction.name):this.actionProps.childActions=childAction.name}},{key:'endChildActions',value:function(){this.children.filter(function(action){return!0==action.active}).forEach(function(activeAction){activeAction.endAction(!0)})}},{key:'endChildAction',value:function(){var name=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,childAction=this.getActiveChildAction(name);childAction&&childAction.endAction(!0)}},{key:'getActiveChildAction',value:function(){var name=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,childActions=this.children.filter(function(action){return!0==action.active});return name&&(childActions=childActions.filter(function(action){return action.name==name.toLowerCase()})),0==childActions.length?void 0:childActions[childActions.length-1]}}]),UserAction}();_defineProperty(UserAction,'api',void 0)},function(module,__webpack_exports__,__webpack_require__){'use strict';__webpack_require__.r(__webpack_exports__),function(global){var _apptel__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5);(function(dtrum){if(global.dtrum&&global.Promise)try{var apptel=new _apptel__WEBPACK_IMPORTED_MODULE_0__.a(dtrum);global.apptel=apptel.api,global.actionManager=apptel.actionManager,global.actionManager.initialize()}catch(e){}})(window.dtrum)}.call(this,__webpack_require__(1))}]);
//# sourceMappingURL=apptel.collector.min.js.map